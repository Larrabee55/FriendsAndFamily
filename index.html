<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script>
    //change on the drop down
    function drpJSON() {
      var data_file = "FriendsAndFamily.json";
      var http_request = new XMLHttpRequest();
      try {
        // Opera 8.0+, Firefox, Chrome, Safari
        http_request = new XMLHttpRequest();

      } catch (e) {
        // Internet Explorer Browsers
        try {
          http_request = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
          try {
            http_request = new ActiveXObject("Microsoft.XMLHTTP");
          } catch (e) {
            // Something went wrong
            alert("Your browser broke!");
            return false;
          }
        }
      }
      http_request.onreadystatechange = function () {
        // if (http_request.readyState == 4) {
        //   // Javascript function JSON.parse to parse JSON data
        //   var jsonObj = JSON.parse(http_request.responseText);

        //   // jsonObj variable now contains the data structure and can
        //   // be accessed as jsonObj.name and jsonObj.country.
        //   var Title = "";
        //   var Author = "";
        //   var extra = "";
        //   for (var i = 0; i < jsonObj.people.length; i++) {
        //     if (jsonObj.people[i].id == document.getElementById("BookSel").value && document.getElementById("BookSel").value != 0) {
        //       Title = Title + jsonObj.people[i].Title + "<br>";
        //       Author = Author + jsonObj.people[i].Author + "<br>";
        //       extra = extra + "<p>" + jsonObj.people[i].desc + "</p>";
        //       var selection = i;
        //     }
        //   }
        //   console.log(selection + "using my code");
        //   document.getElementById("booklist").innerHTML = extra;
        //   document.getElementById("Title").innerHTML = Title;
        //   document.getElementById("Author").innerHTML = Author;
        // }
      }
      http_request.open("GET", data_file, true);
      http_request.send();
    }
    //for the write in element
    function wrtJSON() {

      var data_file = "FriendsAndFamily.json";
      var http_request = new XMLHttpRequest();

      try {
        // Opera 8.0+, Firefox, Chrome, Safari
        http_request = new XMLHttpRequest();

      } catch (e) {
        // Internet Explorer Browsers
        try {
          http_request = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
          try {
            http_request = new ActiveXObject("Microsoft.XMLHTTP");
          } catch (e) {
            // Something went wrong
            alert("Your browser broke!");
            return false;
          }
        }
      }
      http_request.onreadystatechange = function () {
        // if (http_request.readyState == 4) {
        //   // Javascript function JSON.parse to parse JSON data
        //   var jsonObj = JSON.parse(http_request.responseText);

        //   // jsonObj variable now contains the data structure and can
        //   // be accessed as jsonObj.name and jsonObj.country.
        //   var Title = "";
        //   var Author = "";

        //   for (var i = 0; i < jsonObj.people.length; i++) {
        //     console.log(i)
        //     if (jsonObj.people[i].Author.indexOf(document.getElementById("AuthorName").value) > -1 && document.getElementById("AuthorName").value != "") {
        //       Title = Title + jsonObj.people[i].Title + "<br>";
        //       Author = Author + jsonObj.people[i].Author + "<br>";

        //       var selection = i;
        //     }
        //   }
        //   console.log(selection + "Using my code");
        //   document.getElementById("booklist").innerHTML = "";
        //   document.getElementById("Title").innerHTML = Title;
        //   document.getElementById("Author").innerHTML = Author;
        // }
      }
      http_request.open("GET", data_file, true);
      http_request.send();
    }
  </script>
  <title>Friends And Family Assignment</title>
</head>

<body>
  <h1>Book Details</h1>
  <div class="central">Relationship:
    <select id='BookSel' onchange="drpJSON()">

    </select>
    Or Enter Name: <input type="text" name="AuthorName" id="AuthorName" onkeyup="wrtJSON()">
    <input type="button" onclick="wrtJSON()" value="Pick">
  </div>
  <br>
  <table class="src">
    <tr>
      <th>Title</th>
      <th>Author</th>
    </tr>
    <tr>
      <td>
        <div id="Title">None Selected</div>
      </td>
      <td>
        <div id="Author">None Selected</div>
      </td>
    </tr>
    <tr>
      <td>
        <div id="booklist">some books</div>
      </td>
      <td></td>
    </tr>
  </table>

  <script>
    var data_file = "FriendsAndFamily.json";
    var http_request = new XMLHttpRequest();

    try {
      // Opera 8.0+, Firefox, Chrome, Safari
      http_request = new XMLHttpRequest();

    } catch (e) {
      // Internet Explorer Browsers
      try {
        http_request = new ActiveXObject("Msxml2.XMLHTTP");
      } catch (e) {
        try {
          http_request = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
          // Something went wrong
          alert("Your browser broke!");
        }
      }
    }
    http_request.onreadystatechange = function () {
      if (http_request.readyState == 4) {
        // Javascript function JSON.parse to parse JSON data
        var jsonObj = JSON.parse(http_request.responseText);
        var text = "<option value='0'>--</option>";
        for (var i = 0; i < jsonObj.people.length; i++) {
          text = text + "<option value = '" + jsonObj.people[i].relation + "'> " + jsonObj.people[i].relation + "</option>";
        }
        document.getElementById("BookSel").innerHTML = text;
      }
    }
    http_request.open("GET", data_file, true);
    http_request.send();
  </script>
</body>

</html>
<!-- <div class="container">
    <div class="jumbotron">
      <h1>Friends And Family Search</h1>
    </div>
    <div class="row">
      <div class="col-lg-6">
        <div class="input-group">
          <input type="text" class="form-control" aria-label="...">
          <div class="input-group-btn">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
              aria-expanded="false">Action <span class="caret"></span></button>
            <ul class="dropdown-menu dropdown-menu-right">
              <li><a href="#">Friends</a></li>
              <li><a href="#">Family</a></li>
              <li><a href="#">Name</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div> -->